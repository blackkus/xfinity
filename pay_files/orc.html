<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>Orc</title>
  <script>
    if (!window.fetch) {
      document.write('\x3Cscript src="fetch-promise.js">\x3C/script>');
    }
    if (!navigator.sendBeacon) {
      document.write('\x3Cscript src="sendbeacon.js">\x3C/script>');
    }
  </script>
   <script>
var PolarisOrc=function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){return f(a)||g(a,b)||h()}function f(a){if(Array.isArray(a))return a}function g(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(a){return JSON.parse(JSON.stringify(a))}function j(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a}function k(a,b){void 0===b&&(b="");var c={service:"OauthJS",status:"oauthjs-"+a,statusText:Ma[a]};return b&&(c.error=b),c}function l(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}function m(a){for(var b,d=new Uint8Array(a),e=window.crypto||window.msCrypto,f=e.getRandomValues(d),g=[],h="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",j=0;j<f.length;j++)b=f[j],g.push(h[b%h.length]);return g.join("")}function n(a,b,c){var d,e=new Date,f=r().hostname.split(".").slice(-2).join(".");e.setTime(e.getTime()+864e5*(c||30));var g=e.toGMTString();d=encodeURIComponent(a)+"="+b+";expires="+g+";path=/",-1!==f.indexOf(".")&&(d+=";domain="+f),window.document.cookie=d}function o(a){return a?a.slice(1).replace(/^\//,"").split(/[&?]/).map(function(a){return a.split("=")}).reduce(function(a,b){var c=b[0],d=b[1];return a[c]=d,a},{}):{}}function p(a){window.location.replace(a)}function q(){return window.Date.now()}function r(){return window.location}function s(){var a=r();return a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")}function t(){return window.self!==window.parent}function u(a){var b=arguments;if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c,d=Object(a),e=1;e<arguments.length;e++)if(c=b[e],null!=c)for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(d[f]=c[f]);return d}function v(a){if(z()&&!Na[a]){var b=z().getItem(a);if(b)try{Na[a]=JSON.parse(b)}catch(c){Na[a]=b}}return Na[a]||null}function w(a,b){z()&&(Na[a]=b,z().setItem(a,JSON.stringify(b)))}function x(a){z()&&(Na={},z().removeItem(a))}function y(a,b){var c=v(a)||{};u(c,b),w(a,c)}function z(){try{return window.localStorage}catch(a){return console.warn("No local storage",a),null}}function A(){clearInterval(Ja),Ja=setInterval(E,1e3)}function B(){return 0<=window.document.cookie.indexOf("isAuth=1")}function C(){n("isAuth","1",7),A()}function D(){n("isAuth","0",7)}function E(){!B()&&Ja&&H()}function F(a){return q()+1e3*(parseInt(a,10)-60)}function G(a){return!(a!==void 0)||0>=a-q()}function H(){clearInterval(Ja),Ja=!1,Oa.forEach(function(a){return a()})}function I(a){var b=a.authOpts||{};return u(b,{client_id:a.clientId,redirect_uri:s()+(a.authOpts.redirect_uri||""),state:r().href,nonce:m(16)})}function J(a){var b="oauthLastAuthTime"+a.authorizeUrl,c=v(b)||0,d="login"===a.authOpts.prompt||K(c);return w(b,q()),d}function K(a){return parseInt(a,10)+3000<q()}function L(a){this.message=a}function M(a){return decodeURIComponent(Pa(a).replace(/(.)/g,function(a,b){var c=b.charCodeAt(0).toString(16).toUpperCase();return 2>c.length&&(c="0"+c),"%"+c}))}function N(a){this.message=a}function O(a,b){return q()-1e3*a>(b||2e5)}function P(a,b){return!(a&&O(b.authTime))}function Q(a){var b;try{b=Ra(a)}catch(a){return null}return{clientId:b.aud,authTime:b.auth_time,issuedAt:b.iat,expires:b.exp,trackingId:b.tid||"unknown",userType:b.user_type,acrClaimValue:b.acr,nonce:b.nonce,decodedToken:b}}function R(a,b){return!!(a&&b)&&a.clientId===b.clientId&&a.state===b.state&&P("login"===a.prompt,b)}function S(a,b){return Promise.race([Ya(b),Za(a)])}function T(a){return W({hash:window.document.location.hash,loginOptions:a})||Y(a)||{}}function U(a){var b=a.hashParams,c=a.tokenInfo,d=a.loginOptions;return u({},{accessToken:b.access_token,idToken:b.id_token,accessTokenExpiresAt:F(b.expires_in),enteredCredentials:10>c.issuedAt-c.authTime,tokenInfo:c,loginOptions:d})}function V(a){var b=/access_token=|token_type=|id_token=|state=|expires_in=|nonce=|scope=|error=|error_description/,c=a.slice(1).split("&").filter(function(a){return!b.test(a)}).join("&"),d=r();window.history.replaceState(null,"",""+d.pathname+d.search+(c?"#"+c:""))}function W(a){var b,c=a.hash,d=a.loginOptions,e=o(c),f={},g=d.authOpts.max_age;if(!t()&&Object.keys(e).length&&V(c),e.access_token){if(C(),!e.id_token)console.warn("No id token in response, see docs for more info.");else if(f=Q(e.id_token),!R(d,f))return D(),{error:"Token error: id_token failed to verify"};if(b=U({hashParams:e,tokenInfo:f,loginOptions:d}),y($(d),b),t()||(b.redirectedFrom=decodeURIComponent(e.state)),b.secure=/Password/.test(f.acrClaimValue)&&b.enteredCredentials||ba(g,b.tokenInfo),b.secure)fa();else if(g)return void ea(u({},d,{redirect:!1}));return b}return e.error?"login_required"===e.error?X():{error:e.error}:void 0}function X(){var a={error:"login required"};return t()?(a.error="Third party cookies may be disabled in iframes",a):(D(),a)}function Y(a){var b=$(a),c=a.authOpts.max_age,d=v(b);if(d&&B()&&!G(d.accessTokenExpiresAt)){if(d.secure=ba(a.authOpts.max_age,d.tokenInfo))fa();else if(c)return void ea(u({},a,{redirect:!1}));return d}}function Z(a){var b=a.error,c=a.loginOptions;if("login required"===b&&c.redirect&&!t()){var d=da(c).replace("prompt=none","prompt=login");return Promise.reject(p(d))}return Promise.reject(k("error-006",b))}function $(a){return a.clientId+a.authorizeUrl}function _(a){var b=da(a),c=JSON.parse(JSON.stringify(a));c.allowIframeLoginWithoutPromptNone||(c.authOpts.prompt="none"),c.authOpts.redirect_uri=c.iframeRedirectUri;var d=da(c);return a.authOpts.max_age&&u(a,{useIframe:!1,redirect:!0}),J(a)?a.useIframe&&"login"!==a.authOpts.prompt?S(d,a.iframeTimeout).then(function(b){var c=W({hash:b,loginOptions:a})||{};return c.accessToken?Promise.resolve(c):c.error?Z({error:c.error,loginOptions:a}):Promise.reject(k("error-003"))}):a.redirect?Promise.reject(p(b)):Promise.reject(k("error-005")):Promise.reject(k("error-004"))}function aa(a){var b=u({},{iframeRedirectUri:"/token.html",useIframe:!0,redirect:!0,allowIframeLoginWithoutPromptNone:!1,iframeTimeout:5e3},a);return b.authOpts=u({},{response_type:"token"},a.authOpts),b}function ba(a,b){return v("secureAuthTime")+1e3*a>q()||b.authTime+a>q()/1e3}function ca(a){if(!a||!a.clientId||!a.authorizeUrl)throw new Error("argument must be an object with clientId and authorizeUrl properties");var b=aa(a),c=T(b);return c.error?Z({error:c.error,loginOptions:b}):c.accessToken?Promise.resolve(c):_(b)}function da(a){if(!a||!a.clientId||!a.authorizeUrl)throw new Error("argument must be an object with clientId and authorizeUrl properties");var b=aa(a),c=I(b);return b.authorizeUrl+"?"+l(c)}function ea(a){if(!a||!a.clientId||!a.authorizeUrl)throw new Error("argument must be an object with clientId and authorizeUrl properties");var b=aa(a);if(x($(b)),x("secureAuthTime"),b.redirect)return D(),p(b.logoutUrl)}function fa(){w("secureAuthTime",q())}function ga(a){var b=a.role?a.role.split(","):[];return-1<b.indexOf("RestrictedSecondary")}function ha(a){return a&&"SUCCESS"===a.status&&a.newEmails}function ia(a){fb.test(a)&&(gb=a)}function ja(a){return a.match(/polaris\.xfinity\.com/)?"prod":a.match(/polaris\.staging\.xfinity\.com/)?"staging":a.match(/local/)?"local":"prod"}function ka(a,b,c){var d,e,f,g,h;"undefined"==typeof a||(b=b||"",c=c||{},d=ab.clientId||"polaris",c.accountNumber=Va?Va.accountNumber:"",f={en:a,et:b,ec:d,d:bb,logData:c},g=ja(location.hostname),f=j({_time:Date.now(),originalLang:navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,referrer:document.referrer},f||{}),"local"===g?(h=["ec="+d,"en="+a,"et="+b,"ts="+e,JSON.stringify(f)].join("&"),console.warn(":::RLog DryRun::: ",h)):navigator.sendBeacon("https://joust.xfinity.com/api/polaris",JSON.stringify(f)))}function la(a,b,c){try{gb||c?window.parent.postMessage({name:a,data:b},c?"*":gb):console.warn("Polaris communication restricted.")}catch(a){return console.warn("Polaris communication restricted.",a),!1}}function ma(a){var b=a.data.name,c=a.data.data;ia(a.origin),gb&&Ua[b]&&Ua[b](c),gb||pa("auth-hide",!0,!0)}function na(){Ta=setTimeout(oa,1e3),la("orc-ping")}function oa(){ka("orchestration","error",{error:"Communication"})}function pa(a,b,c){la("orc-set",{key:a,value:b},c)}function qa(a,b){la("orc-set-data",{key:a,value:b})}function ra(){return{clientId:"polaris",useIframe:!1,authorizeUrl:"https://oauth.xfinity.com/oauth/authorize",logoutUrl:"https://oauth.xfinity.com/oauth/sp-logout",authOpts:{redirect_uri:"/orc.html",prompt:"none"}}}function sa(){var a=ab||{},b=ra(a.mode);return la("orc-passive",!0),ca(b)}function ta(){ea(j(ra(),{redirect:!1}))}function ua(){return sa().then(function(a){var b=a.accessToken;return b})}function va(){return db.fetch("/user").then(function(a){return a=a||{},a.isAuthenticated="true",a.authType="auth",a.isRestricted=ga(a),qa("user",a),pa("firstName",a.firstName||a.displayName||"Hello!"),a})}function wa(a){var b="toasts";return"Menu"===a&&(b="notifications"),b}function xa(){var a;return ab.clientId&&(a="/"+ab.clientId),db.fetch("/notifications"+a).then(function(a){return qa("notifications",a),a.reduce(function(a,b){return b.viewType.forEach(function(c){b.message.forEach(function(d){d.notificationType=b.type,a[wa(c)].push(d)})}),a},{toasts:[],notifications:[]})}).then(function(a){za(a),ya(a.notifications,"notifications","addNotification",ib.notifications),ya(a.toasts,"toasts","addToast",ib.toasts)})}function ya(a,b,c,d){a.forEach(function(a){Ka[c](jb[b](a))}),0<d.length&&pa(b,d)}function za(a){hb=a||{}}function Aa(){ib.toasts=[],ya(hb.toasts,"toasts","addToast",ib.toasts)}function Ba(a,b){b.views=b.views?b.views+1:1,a.views=b.views,Ia(a.id,b)}function Ca(a){var b;if(a&&0===ib.toasts.length){if(b=Ha(a.id),b.dismissed)return!1;if(b.views===a.maxViews)return Ea(a,"maxViewsReached"),!1;Ba(a,b),"THIRD_PARTY"!==a.notificationType&&ka("notificationAPI","impression",a),ib.toasts.push(a)}}function Da(a){var b;if(a){if(b=Ha(a.id),b.dismissed)return!1;if(b.views===a.maxViews)return Ea(a,"maxViewsReached"),!1;Ba(a,b),"THIRD_PARTY"!==a.notificationType&&ka("notificationAPI","impression",a),ib.notifications.push(a)}}function Ea(a,b){Ia(a.id,{dismissed:b}),a.dismissed=b,ka("notificationAPI","dismissal",a),"toast"===a.viewType&&Aa()}function Fa(){var a=La.get("notifications")||{};return Object.entries(a).forEach(function(b){var c=e(b,2),d=c[0],f=c[1];f.hasOwnProperty("ts")&&new Date().getTime()-f.ts>2592000000&&delete a[d]}),a}function Ga(a){Object.entries(a).forEach(function(b){var c=e(b,2),d=c[0],f=c[1];f.hasOwnProperty("ts")||(a[d].ts=new Date().getTime())}),La.set("notifications",a)}function Ha(a){var b=Fa();return b[a]||{views:0}}function Ia(a,b){var c=Fa();c[a]=b,Ga(c)}var Ja,Ka=Object.freeze({get response(){return hb},get types(){return ib},get setResponse(){return za},get addToast(){return Ca},get addNotification(){return Da},get dismissed(){return Ea},get generate(){return jb}}),La={get:function(a){var b;try{return b=localStorage.getItem(a),JSON.parse(b)}catch(a){return b}},set:function(b,c){try{return"object"===a(c)&&(c=JSON.stringify(c)),localStorage.setItem(b,c)}catch(a){return!1}}},Ma={"error-001":"Unable to load iframe","error-002":"Timeout loading iframe","error-003":"Missing access token","error-004":"Possible loop","error-005":"Login options are misconfigured. Set useIframe: true and/or redirect: true","error-006":"An error is present in the response URL hash"},Na={},Oa=[];L.prototype=new Error,L.prototype.name="InvalidCharacterError";var Pa="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(a){var b=(a+"").replace(/=+$/,"");if(1==b.length%4)throw new L("'atob' failed: The string to be decoded is not correctly encoded.");for(var c,d,e=0,f=0,g="";d=b.charAt(f++);~d&&(c=e%4?64*c+d:d,e++%4)?g+=String.fromCharCode(255&c>>(6&-2*e)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d);return g},Qa=function(a){var b=a.replace(/-/g,"+").replace(/_/g,"/");switch(b.length%4){case 0:break;case 2:b+="==";break;case 3:b+="=";break;default:throw"Illegal base64url string!";}try{return M(b)}catch(a){return Pa(b)}};N.prototype=new Error,N.prototype.name="InvalidTokenError";var Ra=function(a,b){if("string"!=typeof a)throw new N("Invalid token specified");b=b||{};var c=!0===b.header?0:1;try{return JSON.parse(Qa(a.split(".")[c]))}catch(a){throw new N("Invalid token specified: "+a.message)}};Ra.InvalidTokenError=N;var Sa,Ta,Ua,Va,Wa=document.createElement("iframe"),Xa=function(){return document.body.appendChild(Wa)},Ya=function(a){return new Promise(function(b,c){setTimeout(function(){return c(k("error-002",Sa))},a)})},Za=function(a){return new Promise(function(b,c){Wa.onload=function(){try{var a=Wa.contentWindow.document.location.hash;a?b(a):c(k("error-003"))}catch(a){return void(Sa=a)}document.body.removeChild(Wa)},Wa.onerror=function(a){c(k("error-001",a)),document.body.removeChild(Wa)},Wa.setAttribute("style","display: none;"),Wa.src=a,document.body?Xa():document.addEventListener("DOMContentLoaded",Xa)})},$a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},_a=function(){function a(c){var d=c.getToken,e=c.base;b(this,a),this.retried={},this.getToken=d,this.base=e}return d(a,[{key:"_getHeaders",value:function(a){var b,c,d;return a=a||{},a.headers=a.headers||{},b=i($a),c=j(b.headers,a.headers),d=j(j(b,a),{headers:c}),this.getToken().then(function(a){return d.headers.Authorization="Bearer "+a,d})}},{key:"fetch",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length?arguments[1]:void 0;return this._getHeaders(c).then(function(c){return window.fetch(a.base+b,c).then(function(a){return a.ok?a:Promise.reject(a)}).then(function(a){return a.json()}).catch(a._retry.bind(a,b,c))})}},{key:"_retry",value:function(a,b,c){return this.retried[a]?Promise.reject(c):(this.retried[a]=!0,this.fetch(a,b).catch(function(a){return console.warn("failed to load after retry:",a),Promise.reject(a)}))}}]),a}(),ab={},bb=function(a){var b,c;return a=a.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search),null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}("domain")||"",cb=function(a){return{local:{SC:"https://api.sc.xfinity.com",YHM:"https://yhm.comcast.net/YhmProxy/extension/YHM/?response=json"},staging:{SC:"https://api-staging.sc.xfinity.com",YHM:"https://yhm.comcast.net/YhmProxy/extension/YHM/?response=json"},prod:{SC:"https://api.sc.xfinity.com",YHM:"https://yhm.comcast.net/YhmProxy/extension/YHM/?response=json"}}[a]}(ja(window.location.hostname)),db=new _a({getToken:ua,base:cb.SC}),eb=new _a({getToken:ua,base:cb.YHM}),fb=/^(https?:\/\/)?([\w\-\.]+)?\b(?:((weather|nbcnews|cnbc|today|match|bankrate)\.com)|((xfinity|comcast)\.(com|net))|(localhost))(:\d{4})?(\/|\?|$)/,gb=!1;Ua={"polaris-signout":ta,"polaris-refresh-token":function(){ta(),sa()},"polaris-close-dismissed":function(a){Ea(a.item,"close")},"polaris-action-dismissed":function(a){Ea(a.item,"action")},"polaris-authed":function(a){a.value&&(la("orc-loaded"),window.location.replace(da(ra())))},"polaris-config":function(a){var b,c;b=!1,c={},a=a||{},ab=a,la("orc-passive",!1),na(),a.autoAuth||a.isAuthed?sa().then(function(c){var d=c.accessToken;la("orc-authed"),a.shareToken&&qa("token",d),pa("state","authenticated"),va(b).then(function(b){Va=b,a.enableOutages&&db.fetch("/outage").then(qa.bind(null,"outages")),a.disableEmailCount||eb.fetch().then(ha).then(pa.bind(null,"emailCount")),b.isRestricted||(a.enableAccountSelector&&pa("linkedAccounts",b.linkedAccounts||""),a.enableNotifications&&xa(),a.enablePersonalization&&db.fetch("/personalization").then(qa.bind(null,"personalization")))})}).catch(function(){c.isAuthenticated="false",(a.passiveReload||!B())&&(qa("user",c),pa("state","recognized"))}):(c.isAuthenticated="false",(a.passiveReload||!B())&&qa("user",c),pa("state","recognized"))},"polaris-ping-receipt":function(){la("orc-communication-established"),clearTimeout(Ta)},"polaris-click":function(a){var b=a.en;ka(b,"click",a.link),"_top"===a.link.target&&(top.location.href=a.link.url)},"polaris-notify":function(a){"toast"===a.viewType?(Ca(a),pa("toasts",ib.toasts)):"notification"===a.viewType&&(Da(a),pa("notifications",ib.notifications))}};var hb={},ib={notifications:[],toasts:[]},jb={notifications:function(a){return{en:"notificationAPI",url:a.link[0].url,maxViews:5,id:a.id,main:a.title,dismissable:!0,messageType:a.type,notificationType:a.notificationType,viewType:"notification"}},toasts:function(a){return{en:"notificationAPI",id:a.id?a.id:"",icon:a.icon?a.icon:"",main:a.title?a.title:"",sub:a.description?a.description.reduce(function(a,b){return a+" "+b},""):"",links:a.link?a.link.map(function(a){return a.text=a.label?a.label:a.text,a.target="_blank",delete a.label,a}):[],maxViews:a.numberOfViews?a.numberOfViews:0,dismissable:!0,messageType:a.type,notificationType:a.notificationType,viewType:"toast"}}};window.addEventListener("message",ma,!1),la("orc-loaded",null,!0);return{Notifications:Ka}}();
//# sourceMappingURL=orc.js.map
   </script>
</head>
<body>

</body></html>